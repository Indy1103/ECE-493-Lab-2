## Specification Analysis Report
  | ID | Category | Severity | Location(s) | Summary | Recommendation |
  | C1 | Constitution Alignment | CRITICAL | .specify/memory/constitution.md:32, specs/006-save-
  submission-draft/tasks.md:29, specs/006-save-submission-draft/tasks.md:30, specs/006-save-submission-
  draft/tasks.md:31, specs/006-save-submission-draft/tasks.md:32, specs/006-save-submission-draft/
  tasks.md:33, specs/006-save-submission-draft/tasks.md:34 | Constitution requires every behavior
  change to start with failing tests, but Foundational behavior tasks (T005–T010) have no preceding
  failing-test tasks. | Add explicit failing test tasks for foundational behavior before implementation
  | D1 | Duplication | HIGH | specs/006-save-submission-draft/spec.md:109, specs/006-save-submission-
  draft/spec.md:110 | RAR-001 is duplicated with overlapping wording, creating ambiguous traceability
  requirements consistently. |
  | A1 | Ambiguity | HIGH | specs/006-save-submission-draft/spec.md:89, specs/006-save-submission-
  draft/spec.md:97, specs/006-save-submission-draft/spec.md:126 | “Applicable submission rules” /
  “provided-field rules” are referenced but no single authoritative rule source/version is bound in
  requirements. | Add an explicit authoritative policy reference/version for draft validation rules. |
  | E1 | Coverage Gap | HIGH | specs/006-save-submission-draft/spec.md:102, specs/006-save-submission-
  draft/spec.md:103, specs/006-save-submission-draft/tasks.md | SPR-001 (in-transit encryption) and
  SPR-002 (at-rest encryption) are required but have no direct implementation/verification tasks. | Add
  concrete tasks to verify/enforce TLS path and at-rest protection for draft data and backups in this
  feature scope. |
  | U1 | Underspecification | MEDIUM | specs/006-save-submission-draft/spec.md:146 | SC-001 (“95% of
  valid saves complete successfully”) lacks explicit sample window/baseline definition, reducing
  measurability. | Define measurement scope (environment, run size, or acceptance batch criteria). |
  | I1 | Inconsistency | MEDIUM | specs/006-save-submission-draft/spec.md:109, specs/006-save-
  IDs are inconsistent (duplicate RAR-001), while tasks target deterministic concurrency as a separate
  concern. | Normalize reliability IDs so each task maps unambiguously to one requirement ID. |
  Coverage Summary Table:

  |-----------------|-----------|----------|-------|
  | save-only-when-valid | Yes | T016, T017, T030 | Save orchestration and no-mutation safeguards |
  | reject-invalid-save-with-feedback | Yes | T023, T028, T031, T032 | Contract + validation/error
  | no-resumable-update-on-failed-validation | Yes | T024, T030 | Explicit preservation behavior |
  | reject-unauth-or-expired-session-explicitly | Yes | T025, T029, T031, T032 | Authn/authz coverage |
  | draft-validation-baseline-not-full-submission | Yes | T007, T028 | Baseline validation boundary |
  | protect-data-in-transit | No | — | Gap vs SPR-001 |
  | protect-data-at-rest | No | — | Gap vs SPR-002 |
  | no-plaintext-draft-in-logs-errors | Yes | T010, T046 | Audit + redaction test |
  | enforce-author-ownership-save-resume | Yes | T008, T029, T038 | Ownership guard/use case checks |
  | no-corruption-under-concurrent-saves | Yes | T017, T044 | Repository + concurrency test |
  | deterministic-last-write-wins | Yes | T017, T044 | Explicitly tested |
  | include-draft-records-in-backup-restore | Yes | T011 | Backup/restore documentation task |
  | preserve-layer-separation | Yes | T016, T017, T018, T019, T020, T021, T038, T039, T040, T041, T042,
  T043 | Layered implementation pattern |
  | maintain-uc06-atuc06-traceability | Yes | T012, T013, T014, T015, T023, T024, T025, T026, T027,
  | consistent-user-visible-messaging | Yes | T021, T032 | Success + error UI messaging |
  Constitution Alignment Issues:

  - CRITICAL: Test-first mandate is not fully represented in Phase 2 execution order (behavior tasks
    without failing-test predecessors).
  - HIGH: Constitution security defaults are stated in spec/plan but not fully decomposed into
    actionable tasks for in-transit and at-rest controls within this feature plan.

  Unmapped Tasks:

  - Duplication Count: 1
  - Critical Issues Count: 1

  ### Next Actions

  - Resolve CRITICAL issue before /speckit.implement.
  - Recommended commands:
      - Run /speckit.tasks with refinement to insert failing-test tasks ahead of Phase 2 behavior
        tasks.
      - Manually update specs/006-save-submission-draft/spec.md to remove duplicate RAR-001 and bind
        draft-validation policy source/version.
      - Manually update specs/006-save-submission-draft/tasks.md to add explicit TLS/at-rest
        verification tasks for SPR-001/SPR-002.

---
• 1. Fix constitution test-first violation (CRITICAL) in specs/006-save-submission-draft/tasks.md
  - Insert failing-test tasks at start of Phase 2, before T005–T010:

  - [ ] T005 Add failing migration/integration test for one-current-draft uniqueness in `backend/tests/
  - [ ] T006 [P] Add failing integration test for ownership guard behavior in `backend/tests/
  - [ ] T007 [P] Add failing integration test for validation baseline enforcement (title required) in
  - [ ] T008 [P] Add failing integration test for audit redaction baseline in `backend/tests/

  - Renumber downstream tasks (T005 onward) sequentially.


      - first RAR-001 stays as-is,
  - Recommended merge (cleaner):
  - **RAR-001**: Concurrent draft save requests for the same in-progress submission MUST NOT corrupt
  saved draft state and MUST resolve valid concurrent saves with deterministic last-write-wins
  behavior.

  - Then keep RAR-002..RAR-004 unchanged.

  3. Make validation rule source authoritative in specs/006-save-submission-draft/spec.md

  - Add one explicit requirement under Functional Requirements:

  - **FR-012**: The draft-save validation rule set MUST be sourced from the active CMS submission
  policy version for the conference cycle, and the policy version identifier MUST be recorded with each
  successful draft save.

  - Add assumption/dependency line clarifying where policy is defined.

  4. Cover SPR-001 and SPR-002 in specs/006-save-submission-draft/tasks.md

  - Add tasks in Phase 2 or Phase 6:

  - [ ] T0XX [P] Add failing integration test verifying draft save/retrieve endpoints reject non-TLS
  transport in `backend/tests/integration/submission-drafts/transportSecurity.integration.test.ts`
  - [ ] T0XX Implement transport-security enforcement for submission draft routes in `backend/src/
  presentation/submission-drafts/submissionDraftRouteSecurity.ts`
  - [ ] T0XX [P] Add failing integration test verifying draft payload persistence uses encrypted-at-
  rest storage path in `backend/tests/integration/submission-drafts/
  atRestProtection.integration.test.ts`
  - [ ] T0XX Implement at-rest protection wiring/verification for draft storage and backups in
  `backend/src/data/submission-drafts/PrismaSubmissionDraftRepository.ts` and `infra/ops/backup-
  restore.md`

  If you want, I can apply these edits directly now.

  ---

  • 1. Fix constitution test-first violation (CRITICAL) in specs/006-save-submission-draft/tasks.md
  - Insert failing-test tasks at start of Phase 2, before T005–T010:

  - [ ] T005 Add failing migration/integration test for one-current-draft uniqueness in `backend/tests/
  - [ ] T006 [P] Add failing integration test for ownership guard behavior in `backend/tests/
  - [ ] T007 [P] Add failing integration test for validation baseline enforcement (title required) in
  - [ ] T008 [P] Add failing integration test for audit redaction baseline in `backend/tests/

  - Renumber downstream tasks (T005 onward) sequentially.


      - first RAR-001 stays as-is,
  - Recommended merge (cleaner):
  - **RAR-001**: Concurrent draft save requests for the same in-progress submission MUST NOT corrupt
  saved draft state and MUST resolve valid concurrent saves with deterministic last-write-wins
  behavior.

  - Then keep RAR-002..RAR-004 unchanged.

  3. Make validation rule source authoritative in specs/006-save-submission-draft/spec.md

  - Add one explicit requirement under Functional Requirements:

  - **FR-012**: The draft-save validation rule set MUST be sourced from the active CMS submission
  policy version for the conference cycle, and the policy version identifier MUST be recorded with each
  successful draft save.

  - Add assumption/dependency line clarifying where policy is defined.

  4. Cover SPR-001 and SPR-002 in specs/006-save-submission-draft/tasks.md

  - Add tasks in Phase 2 or Phase 6:

  - [ ] T0XX [P] Add failing integration test verifying draft save/retrieve endpoints reject non-TLS
  transport in `backend/tests/integration/submission-drafts/transportSecurity.integration.test.ts`
  - [ ] T0XX Implement transport-security enforcement for submission draft routes in `backend/src/
  presentation/submission-drafts/submissionDraftRouteSecurity.ts`
  - [ ] T0XX [P] Add failing integration test verifying draft payload persistence uses encrypted-at-
  rest storage path in `backend/tests/integration/submission-drafts/
  atRestProtection.integration.test.ts`
  - [ ] T0XX Implement at-rest protection wiring/verification for draft storage and backups in
  `backend/src/data/submission-drafts/PrismaSubmissionDraftRepository.ts` and `infra/ops/backup-
  restore.md`

  If you want, I can apply these edits directly now.


  ---

  • ## Specification Analysis Report
  |----|----------|----------|-------------|---------|----------------|
  submission-draft/tasks.md:29-35 | Constitution requires failing tests before behavior implementation;
  Phase 2 starts with implementation tasks without preceding failing tests. | Add explicit failing-test
  tasks before foundational implementation tasks. |
  | D1 | Duplication | HIGH | specs/006-save-submission-draft/spec.md:109-110 | RAR-001 appears twice
  with overlapping meaning. | Merge to one statement or renumber uniquely. |
  | A1 | Ambiguity | HIGH | specs/006-save-submission-draft/spec.md:89, specs/006-save-submission-
  draft/spec.md:97, specs/006-save-submission-draft/spec.md:126 | “Applicable/provided-field submission
  rules” are not tied to a single authoritative policy/version. | Add explicit policy source + version
  requirement. |
  | G1 | Coverage Gap | HIGH | specs/006-save-submission-draft/spec.md:102-103, specs/006-save-
  submission-draft/tasks.md | SPR-001 (in-transit encryption) and SPR-002 (at-rest encryption) have no
  direct implementation/verification tasks. | Add TLS and at-rest protection tasks/tests. |
  | U1 | Underspecification | MEDIUM | specs/006-save-submission-draft/spec.md:144 | SC-001 has a
  metric but not a clear measurement window/sample definition. | Define evaluation scope (environment,
  sample size/window). |
  | I1 | Inconsistency | MEDIUM | specs/006-save-submission-draft/spec.md:109-113, specs/006-save-
  submission-draft/tasks.md:125 | Reliability requirement indexing is inconsistent due duplicate ID
  while tasks assume distinct concurrency obligations. | Normalize reliability IDs for one-to-one
  traceability. |

  Coverage Summary Table:

  | Requirement Key | Has Task? | Task IDs | Notes |
  |-----------------|-----------|----------|-------|
  | authenticated-save-request | Yes | T018, T029 | Save path + auth checks present |
  | validate-before-persist | Yes | T007, T028, T016 | Covered in business flow |
  | save-only-when-valid | Yes | T016, T017, T030 | Covered |
  | success-confirmation | Yes | T018, T021 | API + UI |
  | no-update-on-validation-failure | Yes | T024, T030 | Covered |
  | unauth/expired-session-rejection | Yes | T025, T029, T031, T032 | Covered |
  | baseline-validation-not-final | Yes | T007, T028 | Covered |
  | transport-encryption | No | — | Gap |
  | no-plaintext-logging | Yes | T010, T046 | Covered |
  | concurrent-save-integrity | Yes | T017, T044 | Covered |
  | preserve-last-valid-on-failure | Yes | T030, T045 | Covered |
  | backup-restore-inclusion | Yes | T011 | Covered |
  | explicit-operational-failure-guidance | Yes | T031, T032, T045 | Covered |
  | layer-separation | Yes | T016-T021, T038-T043 | Covered |
  | business-layer-validation | Yes | T007, T028, T016 | Covered |
  | uc/at-traceability | Yes | T012-T015, T023-T027, T034-T037 | Covered |


  - Test-first sequencing violation in foundational phase (CRITICAL).
  - Security-by-default requirements partially decomposed (missing explicit transport/at-rest task

  Unmapped Tasks:

  - None material.

  Metrics:

  - Total Requirements: 24
  - Total Tasks: 48
  - Coverage % (requirements with >=1 task): 91.7% (22/24)
  - Ambiguity Count: 2
  - Duplication Count: 1
  - Critical Issues Count: 1

  ### Next Actions

  - Resolve CRITICAL issues before /speckit.implement.
  - Suggested commands:
      - Run /speckit.tasks refinement to enforce failing-test-first in Phase 2.
      - Run /speckit.specify refinement to remove duplicate RAR-001 and bind validation-policy source/
        version.
      - Manually update tasks.md to add explicit TLS and at-rest encryption tasks/tests.

  Would you like me to suggest concrete remediation edits for the top 4 issues?

  ---

   1. Test-first sequencing (CRITICAL)

    current T005:
      - failing test for ownership enforcement
      - failing test for title-baseline validation
      - failing test for audit redaction baseline

  2. Duplicate reliability requirement ID

  - In specs/006-save-submission-draft/spec.md, resolve duplicate RAR-001:
      - Preferred: merge lines 109–110 into one stronger RAR-001 containing deterministic last-write-
        wins.
      - Keep RAR-002 onward unchanged.

  3. Authoritative validation policy source

  - Add matching dependency/assumption note pointing to that same source to remove ambiguity.

  4. Missing encryption task coverage (SPR-001/SPR-002)

  - In specs/006-save-submission-draft/tasks.md, add explicit tasks/tests for:
      - transport security verification/enforcement on draft endpoints (TLS-only behavior)